<div class="product-card h-100">
  <div class="product-image-container">
    <div *ngIf="product.images && product.images.length > 0" class="product-image">
      <img [src]="product.images[0]" [alt]="product.nom" />
    </div>
    <div *ngIf="!product.images || product.images.length === 0" class="product-image-placeholder">
      <i class="fas fa-image"></i>
    </div>
  </div>

  <div class="product-body">
    <h5 class="product-title" [title]="product.nom">
      {{ product.nom.length > 50 ? (product.nom.substring(0, 50) + '...') : product.nom }}
    </h5>

    <p class="product-description">
      {{ product.description.length > 100 ? (product.description.substring(0, 100) + '...') : product.description }}
    </p>

    <div class="product-info">
      <p class="info-item">
        <strong>Quantité:</strong> {{ product.quantite }}
      </p>
      <p class="info-item">
        <strong>État:</strong>
        <span [ngClass]="{
          'etat-neuf': product.etat === 'NEUF',
          'etat-bon': product.etat === 'BON_ETAT',
          'etat-mauvais': product.etat === 'MAUVAIS_ETAT'
        }">
          {{ product.etat }}
        </span>
      </p>
    </div>

    <div class="product-footer">
      <div class="product-price">
        {{ formatPrice(product.prix) }}
      </div>

      <button
        class="btn btn-success add-to-cart-btn"
        (click)="onAddToCart()"
        [disabled]="isLoading">
        <span *ngIf="!isLoading">
          <i class="fas fa-cart-plus me-2"></i>
          Ajouter
        </span>
        <span *ngIf="isLoading">
          <i class="fas fa-spinner fa-spin me-2"></i>
          Ajout...
        </span>
      </button>
    </div>
  </div>
</div>