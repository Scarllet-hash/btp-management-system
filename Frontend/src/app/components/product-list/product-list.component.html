<section class="products-section">
  <!-- Barre de filtres -->
  <app-filter-bar
    [categories]="categories"
    (categorySelected)="onCategoryChange($event)"
    (sortChanged)="onSortChange($event)">
  </app-filter-bar>

  <div class="container">
    <!-- Loading spinner -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Chargement...</span>
      </div>
      <p class="loading-text">Chargement des produits...</p>
    </div>

    <!-- Section titre -->
    <div class="section-header" *ngIf="!isLoading">
      <h2 class="section-title">
        <span *ngIf="selectedCategoryId === null">Tous nos produits</span>
        <span *ngIf="selectedCategoryId !== null">
          {{ getCategoryTitle(selectedCategoryId) }}
        </span>
      </h2>
      <p class="section-subtitle">
        {{ products.length }} produit(s) trouvé(s)
      </p>
    </div>

    <!-- Grille des produits -->
    <div class="products-grid" *ngIf="!isLoading && products.length > 0">
      <div class="row">
        <div class="col-lg-3 col-md-4 col-sm-6 mb-4" *ngFor="let product of products">
          <app-product-card
            [product]="product"
            (addToCart)="onAddToCart($event)">
          </app-product-card>
        </div>
      </div>
    </div>

    <!-- Message si aucun produit -->
    <div *ngIf="!isLoading && products.length === 0" class="no-products">
      <div class="text-center">
        <i class="fas fa-search fa-3x text-muted mb-3"></i>
        <h3>Aucun produit trouvé</h3>
        <p class="text-muted">Aucun produit ne correspond à votre recherche dans cette catégorie.</p>
        <button class="btn btn-primary" (click)="onCategoryChange(null)">
          Voir tous les produits
        </button>
      </div>
    </div>
  </div>
</section>